<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Patterns in the Void</title><link>https://blog.patternsinthevoid.net/</link><description></description><atom:link href="https://blog.patternsinthevoid.net/feed.rss.xml" rel="self"></atom:link><lastBuildDate>Fri, 05 Apr 2013 17:42:00 +0000</lastBuildDate><item><title>Algorithmic Compositions</title><link>https://blog.patternsinthevoid.net/algorithmic-compositions.html</link><description>&lt;p&gt;For a long time, I couldn&amp;#8217;t figure out what Twitter was for. I&amp;#8217;m not sure I&amp;#8217;ve
figured that out yet. It seems convenient for posting links to the physics and
cryptography whitepapers I read, and then receiving the internet standard &amp;#8212;
inane feedback from people I&amp;#8217;ve never even heard&amp;nbsp;of.&lt;/p&gt;
&lt;p&gt;At one point, because I couldn&amp;#8217;t figure out what to do with Twitter, I decided
to release a bytebeat album through tweets. I&amp;#8217;ve seen people tweet links to
their new songs or albums or whatever &amp;#8212; that&amp;#8217;s&amp;nbsp;lame. &lt;/p&gt;
&lt;p&gt;So I started creating algorithmic compositions in less than 140 characters in
python. The album, &lt;em&gt;fuck_your_bits&lt;/em&gt; (hashtag=&amp;#8217;#fyb&amp;#8217;), is about half done,
but my friends &lt;a href="http://thoughtcrime.org"&gt;Moxie&lt;/a&gt; and
&lt;a href="https://twitter.com/emblem__"&gt;Emblem&lt;/a&gt; pointed out that not only would the
search function for hashtags on twitter index only the songs in my album from
the past three weeks, but also that tweets in my timeline were dropped from
public view after a certain number of months, depending on some indeterminable
number of other algorithms that calculated &amp;#8220;tweet&amp;nbsp;popularity&amp;#8221;.&lt;/p&gt;
&lt;p&gt;Because people have been asking for the full album, here it is. I&amp;#8217;ll still keep
tweeting it though, because the only other useful thing I can think of that
fits in less than 140 bytes is&amp;nbsp;shellcode.&lt;/p&gt;
&lt;pre class="prettyprint lang-py"&gt;
python -c'import sys;[sys.stdout.write(chr((~t&amp;t&gt;&gt;3^(((t&gt;&gt;((t&gt;&gt;11)%7+6))%15)*t))%256))for t in xrange(2**19)]'|aplay
&lt;/pre&gt;

&lt;pre class="prettyprint lang-py"&gt;
python -c'import sys;[sys.stdout.write(chr(((~t&gt;&gt;2)*(2+(42&amp;t*((7&amp;t&gt;&gt;10)*2))&lt;(24&amp;t*((3&amp;t&gt;&gt;14)+2))))%256))for t in xrange(2**18)]'|aplay
&lt;/pre&gt;

&lt;pre class="prettyprint lang-py"&gt;
python -c'import sys;[sys.stdout.write(chr((((t*5&amp;t&gt;&gt;7|t*9&amp;t&gt;&gt;4|t*18&amp;t/1024)|((t|7)&gt;&gt;5|(t|4)&gt;&gt;9)))%256))for t in xrange(2**18)]'|aplay
&lt;/pre&gt;

&lt;pre class="prettyprint lang-py"&gt;
python -c'import sys;[sys.stdout.write(chr(((~t&gt;&gt;2)*((127&amp;t*(7&amp;t&gt;&gt;9))&lt;(245&amp;t*(4-(7&amp;t&gt;&gt;13)))))%256))for t in xrange(2**20)]'|aplay -c 2 -r4444
&lt;/pre&gt;

&lt;pre class="prettyprint lang-py"&gt;
python -c'import sys;[sys.stdout.write(chr((~t&gt;&gt;5&gt;&gt;(127&amp;t*9&amp;~t&gt;&gt;7&lt;42&amp;t*23^5&amp;~t&gt;&gt;13)+3)%256))for t in xrange(2**18)]'|aplay -c2 -r2222
&lt;/pre&gt;

&lt;pre class="prettyprint lang-py"&gt;
python -c'import sys;[sys.stdout.write(chr((((t&gt;&gt;(2|4)&amp;((t%0x7369)|4|11|5))+(7|4|42)&amp;t))%256))for t in xrange(2**18)]'|aplay -c2 -r4444
&lt;/pre&gt;

&lt;pre class="prettyprint lang-py"&gt;
python -c'import sys;[sys.stdout.write(chr((((t*(t&gt;&gt;13|t&gt;&gt;8)|(t&gt;&gt;16)-t)-64))%256))for t in xrange(2**18)]'|aplay -r4444
&lt;/pre&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Fri, 05 Apr 2013 17:42:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2013-04-05:algorithmic-compositions.html</guid><category>python</category><category>bytebeats</category><category>twitter</category></item><item><title>Zeppelins, Chinese Junk Rigs, and Surfboards</title><link>https://blog.patternsinthevoid.net/zeppelins-chinese-junk-rigs-and-surfboards.html</link><description>&lt;p&gt;One of the first times I met up with &lt;a href="https://twitter.com/moxie"&gt;Moxie&lt;/a&gt; while travelling, we met at a dive
bar in San Francisco&amp;#8217;s Mission District, packed with hipsters. I had nineteen years, a
modified state &lt;span class="caps"&gt;ID&lt;/span&gt; card, and just hitchhiked into town. We sat at the bar, and both ordered well gin and&amp;nbsp;tonics. &lt;/p&gt;
&lt;p&gt;I had a proposal, the sort of get-rich-quick scheme it seems that only 18th century pirates and lazy hacker-squatters are capable of contriving: We fly to China. Then, we spend a few grand purchasing a Chinese junk rig, and equip it with a system of pulleys so that we can man the sails from the cockpit, solo if necessary. Next, we fill the cabin with about as much potable water as we can carry and enough dried food to stave off starvation, and set a course across the northern arc of the Pacific &amp;#8212; avoiding the treachery of the South Seas &amp;#8212; for San Francisco. The choice of vessel was key, the battoned sails and flattened hull of a Chinese junk rig make it arguably one of the safest ships to make a transoceanic voyage alone, not to mention the finicial incentives: being rare in the Americas, a well-kept junk rig would go for anywhere from $50,000 to $250,000 &lt;span class="caps"&gt;USD&lt;/span&gt; &amp;#8212; not to mention grant you free slip fees at just about any marina from Anchorage to Punta Arenas. How could anyone turn down such a preposterous plot which included adventure on the high seas, a high mortality risk, riches and&amp;nbsp;notoriety?&lt;/p&gt;
&lt;p&gt;As I recall, Moxie shook and hung his head, and smiling countered my&amp;nbsp;proposition.&lt;/p&gt;
&lt;p&gt;&lt;span class="dquo"&gt;&amp;#8220;&lt;/span&gt;Ever heard of Santos Dumont?&amp;#8221; he asked.
&amp;#8220;Nope.&amp;#8221;
&amp;#8220;So. Santos Dumont was a Brazilian hero, originally a Frenchman. This was around the late 1800s. He was the type of dude who would trek across the Amazon alone, leave for the North Pole with a party of eight and return with a party of three &amp;#8212; your standard gentleman-adventurer, a total madman. Sometime around the turn of the century, he returns to Paris to participate in a race to sail zeppelins from a certain point around the Eifel Tower and back. He wins, but being rich already, gives half the money to charity. The other half of the prize he puts in the care of a trust fund with the instructions that it should be awarded to anyone who can beat his time &amp;#8212; thirty minutes or so, from what I remember.&amp;#8221;
&amp;#8220;No one&amp;#8217;s won it yet?&amp;#8221;
&amp;#8220;I&amp;#8217;m not entirely sure, but the story appears to end there &amp;#8212; at least, there is no record of anyone claiming the money in the trust &amp;#8212; and it&amp;#8217;s been sitting there, collecting interest, for over a century now.&amp;#8221; Moxie swept the dreads out of his face, took a sip of the gin, and continued: &amp;#8220;It should be simple to beat the time given the advantages of modern&amp;nbsp;materials&amp;#8230;&amp;#8221;&lt;/p&gt;
&lt;p&gt;He and I have had a friendly series of bets throughout our friendship. Moxie usually wins&amp;#8230;and I usually forget to name my stakes. I should have bet on this: If ever anyone were to be the cause for my going to the North Pole, it would be&amp;nbsp;Moxie. &lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;I awoke this morning in my underwear on top of a snarled mess of sheets, with my head rather uncomfortably hanging off the edge of the bed, two laptops and three android android phones¹ piled on top of and around me. The rhythmic pink-noise crash of surf was drafting in on sticky air through an open window above my face. I opened my eyes. Knots of lime-coloured vines hung from a tamarind tree with dark beanpods of fruit half a meter&amp;nbsp;long. &lt;/p&gt;
&lt;p&gt;&lt;img alt="tamarind" src="https://blog.patternsinthevoid.net/static/images/2013/03/sboc/tamarind.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Qu&amp;#8217;est-que fuck? How did I get to Yavin&amp;nbsp;&lt;span class="caps"&gt;IV&lt;/span&gt;?&lt;/em&gt;  &lt;/p&gt;
&lt;p&gt;I blinked, expecting the familiar snowy silence of Prenzlauerburg to replace the acerbic green foliage, the clockwork clacking of the U-Bahn across the raised tracks to replace the steady sound of&amp;nbsp;waves&amp;#8230;&lt;/p&gt;
&lt;p&gt;&lt;img alt="prenzlauerberg" src="https://blog.patternsinthevoid.net/static/images/2013/03/sboc/eberswalderstrasse-prenzlauerberg-hinterof.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Nope. Still on Yavin&amp;nbsp;&lt;span class="caps"&gt;IV&lt;/span&gt;.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Then I remembered the dark curls hanging over noetic eyes and »à plus« on a trainstation platform in the French Alps, the two-hour search and interrogation by &lt;span class="caps"&gt;US&lt;/span&gt; customs agents in the basement of the Montrèal airport, talking all night with expat Iranian dissident-hackers and deciphering the pyobfsproxy stacktraces and kanji showing up in my terminal at the Tor developer meeting at Harvard, and then the series of flights which brought me to the longitudinal apogee of my starting point five days ago. The shortest path of return is straight down; the fastest takes me &lt;a href="http://www.distance.to/Honolulu_Berlin"&gt;directly over the North Pole&lt;/a&gt;. Damnit, should&amp;#8217;ve made that&amp;nbsp;bet&amp;#8230;&lt;/p&gt;
&lt;p&gt;One of the bets I lost years ago &amp;#8212; I think this one was the cost of my hubristic belief that I could pick a lock faster than Moxie &amp;#8212; had the stakes &amp;#8220;loser has to go surfing naked&amp;#8221;. I still haven&amp;#8217;t paid that debt, but, having been on a surf team as a kid, I bet that, wetsuit or otherwise, I could surf better than he could. I think I forgot to name my stakes again, but it doesn&amp;#8217;t matter because I had to let Moxie off the hook this time, due to the painful complications of his recent knee surgery. Though, while waiting for the others to arrive, Christine, Moxie, and I did get a chance to to test out the small surf in our front&amp;nbsp;yard.&lt;/p&gt;
&lt;p&gt;I haven&amp;#8217;t had to write any Java yet, and, tragically, my watercolour portait of &lt;a href="http://www.novosti.rs/upload/images/2011/03/3003j/james-gosling-java.jpg"&gt;James Arthur Gosling&lt;/a&gt; was confiscated at &lt;span class="caps"&gt;U.S.&lt;/span&gt; Customs in Montrèal, but I did write about twelve pages of equations in an attempt to sort out an elliptic curve &lt;span class="caps"&gt;MQV&lt;/span&gt; variation, changed to add embedded, deniable, and authenticated, key exchanges for both a long-term identity key and ephemeral session key as per Ian Goldberg et.al.&amp;#8217;s denAKE() algorithm in the &lt;a href="http://www.cypherpunks.ca/~iang/pubs/mpotr.pdf"&gt;Multi-Party Off-The-Record paper&lt;/a&gt;. That&amp;#8217;ll get added to &lt;a href="https://github.com/isislovecruft/mpOTR"&gt;my fork of a collaborative &lt;span class="caps"&gt;MPOTR&lt;/span&gt; spec&lt;/a&gt; git repo shortly, and review by cryptologists is greatly appreciated. I also rooted my newly-acquired (for &lt;a href="https://ooni.torproject.org/"&gt;&lt;span class="caps"&gt;OONI&lt;/span&gt;&lt;/a&gt; mobile development testing and reading &lt;a href="http://arxiv.org/"&gt;arxiv&lt;/a&gt; papers) android jellybean tablet, and finally ate the taco and tapatio-coated mango I&amp;#8217;d been craving in&amp;nbsp;Berlin.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://blog.patternsinthevoid.net"&gt;isis&lt;/a&gt; &lt;a href="https://github.com/isislovecruft"&gt;agora&lt;/a&gt; &lt;a href="https://twitter.com/isislovecruft"&gt;lovecruft&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Lahaina, Maui, Hawaii, United&amp;nbsp;States&lt;/p&gt;
&lt;p&gt;24 March&amp;nbsp;2013&lt;/p&gt;
&lt;p&gt;¹ Well, actually, one of them was a mozilla boot-to-gecko developer&amp;nbsp;phone.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Mon, 25 Mar 2013 13:38:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2013-03-25:zeppelins-chinese-junk-rigs-and-surfboards.html</guid><category>Spring Break of Code</category><category>Whispersys</category></item><item><title>Pranks</title><link>https://blog.patternsinthevoid.net/pranks.html</link><description>&lt;p&gt;So, while I&amp;#8217;m busy researching away, hard at work &lt;a href="https://trac.torproject.org/projects/tor/ticket/6184"&gt;reverse engineering
proprietary network monitoring software&lt;/a&gt;, and trying to devise methodologies
&lt;a href="https://ooni.nu"&gt;for detecting all&lt;/a&gt; the various and newly-emerging means for technological
censorship that the world&amp;#8217;s government seem to be
&lt;a href="http://www.maannews.net/eng/viewdetails.aspx?id=478726"&gt;oh&lt;/a&gt;-&lt;a href="http://www.scmagazine.com.au/News/306441,telstra-tracks-users-to-build-web-filter.aspx"&gt;so&lt;/a&gt;-&lt;a href="http://arstechnica.com/tech-policy/2012/06/chinese-online-censorship-targets-collective-action-posts/"&gt;peachy&lt;/a&gt;-&lt;a href="https://www.google.com/transparencyreport/removals/government/"&gt;keen&lt;/a&gt; on developing (the &lt;a href="http://youtu.be/C9-LjX8wk60?t=1m1s"&gt;State Department
recently mentioned our research&lt;/a&gt; in their daily briefing), my friend
&lt;a href="https://twitter.com/kaepora"&gt;Nadim&lt;/a&gt; gets to sit around, playing with crypto, doing things like
implementing the &lt;a href="http://www.larc.usp.br/~pbarreto/AnubisPage.html"&gt;Anubis cipher&lt;/a&gt; &lt;a href="https://jslibs.googlecode.com/svn/trunk/src/jscrypt/cipher.cpp"&gt;for Javascript&lt;/a&gt; and inventing &lt;a href="https://potion.io"&gt;music
sharing services with 80s-retro aesthetics&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;And then, he invents &lt;a href="https://crypto.cat"&gt;Cryptocat&lt;/a&gt;. Some of you might have heard of it.  It&amp;#8217;s
&lt;a href="http://www.cypherpunks.ca/otr/"&gt;&lt;span class="caps"&gt;OTR&lt;/span&gt;&lt;/a&gt;, in your browser, as client-side Javascript, and we&amp;#8217;re hoping to build
it into the Tor Browser Bundle someday. But&amp;#8230;that &lt;span class="caps"&gt;OTR&lt;/span&gt; business&amp;#8230;I don&amp;#8217;t
know. It&amp;#8217;s so &lt;em&gt;nineties&lt;/em&gt;. And Ian Goldberg recently published a new paper &lt;a href="http://www.cypherpunks.ca/~iang/pubs/mpotr.pdf"&gt;on
multi-party off-the-record messaging&lt;/a&gt;, but it hasn&amp;#8217;t been implemented
anywhere yet. Cryptocat is supposed to have multi-party encrypted messaging
support soon, and Nadim was going back and forth on the spec &amp;#8212; there were
some open questions, for example, whether or not the static asymmetric keypair
was necessary given that the each chat was already an in-browser&amp;nbsp;session.&lt;/p&gt;
&lt;p&gt;(Cryptonerd tangent: I argue that the static keypair is still necessary due to
Alice and Bob still needing to authenticate to each other with new ephemeral
keypairs when Charlie joins the chat session. Calculation of the session &lt;span class="caps"&gt;ID&lt;/span&gt;
&lt;em&gt;sid&lt;/em&gt;(i), and thus the group key &lt;em&gt;gk&lt;/em&gt;(i) for participants &lt;em&gt;P&lt;/em&gt;(i) depends on
the ephemeral public key {E(Y,i) | Y ∈ &lt;em&gt;P&lt;/em&gt;(i)} of each participant, ergo to
add to or remove from &lt;em&gt;P&lt;/em&gt;(i) a new &lt;em&gt;sid&lt;/em&gt;(i) must be derived, and one should
never reuse E(i). Second, if a user wants to have multiple sids at the same
time, or exit one chat and then join another, assuming that Cryptocat allows
that and that it is done all in the same browser tab, then obviously for the
same reason as before they will need both static and ephemeral&amp;nbsp;keypairs.)&lt;/p&gt;
&lt;p&gt;So, myself and some other people involved with Tor, and stuff and crypto
and stuff, took to sending messages to Nadim in all sorts of fanciful
and prankish ways, just to say &amp;#8220;&lt;span class="caps"&gt;IMPLEMENT&lt;/span&gt; &lt;span class="caps"&gt;MPOTR&lt;/span&gt;.&amp;#8221; Notes under the hotel
room door in Brazil; late night phone calls; sharpie on his face after
diving over a conference room table to tackle him. That sort of&amp;nbsp;thing.&lt;/p&gt;
&lt;p&gt;Then! I got bored doing some thing where I do something that involves a
computer. And I wrote &lt;a href="http://patternsinthevoid.net/kaepora.mean"&gt;this&lt;/a&gt;:&lt;/p&gt;
&lt;pre class="prettyprint lang-sh"&gt;
#!/bin/bash
###############################################################
# kaepora
# -------
# Sends an email to @kaepora about implementing MPOTR.
# Requires 'dict' and 'fortune-mod', mutt as your configured
# mail client, and some sort of MTA.
#
# @author isis agora lovecruft Agora Lovecruft, 0x2cdb8b35
# @date 11 June 2012
###############################################################

. ~/.bashrc

TO="nadim@nadim.cc"
FUTURE=`/usr/games/fortune`
FUTURE_FIRST=${FUTURE:0:1}
FUTURE_LAST=${FUTURE:1}
FUTURE="${FUTURE_FIRST,,}$FUTURE_LAST"
FUTURE=${FUTURE%%?[-][-]*}

set -- junk $FUTURE; shift

if [[ "$#" -gt "10" ]] ; then
    SUBJECT="When you implement mpOTR, "`/bin/echo ${@:1:10}`"..."
    shift 10
    BODY="...""$@"
else
    SUBJECT="When you implement mpOTR, $@"
fi
BODY="$BODY"`/usr/bin/whoami`"@"`/bin/hostname`":~$ dict implement
"`/usr/bin/dict implement`"
"`/usr/bin/whoami`"@"`/bin/hostname`":~$ dict mpOTR
"`/usr/bin/dict mpOTR 2&gt;&amp;1`""

echo "${BODY}" | mutt -s "${SUBJECT}" ${TO}
&lt;/pre&gt;

&lt;p&gt;Which, short explanation, sends a fancy email to Nadim about how he
needs to &lt;span class="caps"&gt;IMPLEMENT&lt;/span&gt;&amp;nbsp;&lt;span class="caps"&gt;MPOTR&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;And then I tweeted&amp;nbsp;this:&lt;/p&gt;
&lt;p&gt;&lt;img alt="kaepora-mean-tweet" src="https://blog.patternsinthevoid.net/static/images/kaepora-mean-tweet.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Which grabs the above script and puts it in the user&amp;#8217;s crontab so that
the email goes out daily (and each day it&amp;#8217;s a different&amp;nbsp;email).&lt;/p&gt;
&lt;p&gt;I don&amp;#8217;t actually know how many people crontabbed it. I&amp;#8217;m hoping not many,
because I didn&amp;#8217;t really program any undo button on the little botnet. I
dunno. Twitter. I just wasn&amp;#8217;t expecting people to read my feed, let alone
click&amp;nbsp;links.&lt;/p&gt;
&lt;p&gt;But now, Nadim&amp;#8217;s just about done &lt;span class="caps"&gt;IMPLEMENTING&lt;/span&gt; &lt;span class="caps"&gt;MPOTR&lt;/span&gt;, so I feel bad. Now
there&amp;#8217;s &lt;a href="http://patternsinthevoid.net/kaepora"&gt;this&lt;/a&gt;:&lt;/p&gt;
&lt;pre class="prettyprint lang-sh"&gt;
#!/bin/bash
###############################################################
# kaepora (nice version)
# ----------------------
# Sends an email to @kaepora to say thanks for implementing 
# MPOTR.  Requires 'fortune-mod', mutt as your configured mail 
# client, a default install of python&gt;=2.5 and some sort of MTA.
#
# @author isis agora lovecruft Agora Lovecruft, 0x2cdb8b35
# @date 28 June 2012
###############################################################

. $HOME/.bashrc

TO="nadim@nadim.cc"
ALSO="isis agora lovecruft@patternsinthevoid.net"
FUTURE=`/usr/games/fortune -e science computers`
FUTURE_FIRST=${FUTURE:0:1}
FUTURE_LAST=${FUTURE:1}
FUTURE="${FUTURE_FIRST,,}$FUTURE_LAST"
FUTURE=${FUTURE%%?[-][-]*}

set -- junk $FUTURE; shift

if [[ "$#" -gt "10" ]] ; then
    SUBJECT="Because you implemented mpOTR, "`/bin/echo ${@:1:10}`"..."
    shift 10
    BODY="...""$@"
else
    SUBJECT="Because you implemented mpOTR, $@"
fi

BODY_SCRIPT=$HOME/scripts/geo-kaepora

if [[ -z $BODY_SCRIPT ]] ; then
    if [[ -z $HOME/.geo-kaepora ]] ; then
        wget -O $HOME/.geo-kaepora http://www.patternsinthevoid.net/geo-kaepora
        chmod +x $HOME/.geo-kaepora
    fi

    BODY_SCRIPT=$HOME/.geo-kaepora
fi

BODY="$BODY"`$BODY_SCRIPT`""
echo "${BODY}" | mutt -s "${SUBJECT}" ${TO}

## Just to be fair this time...
echo "${BODY}" | mutt -s "${SUBJECT}" ${ALSO}
&lt;/pre&gt;

&lt;p&gt;Which downloads and calls &lt;a href="http://patternsinthevoid.net/geo-kaepora"&gt;this ridiculous python script&lt;/a&gt;:&lt;/p&gt;
&lt;pre class="prettyprint lang-py"&gt;
#!/usr/bin/env python
# -*- coding: utf-8 -*-
#################################################################################
# geo-kaepora
# -----------------------
# Prints a random abstract geometrical shape as ascii art!
# Makes a pretty!
# Tells a story written by an AI!
#
# @author Isis Agora Lovecruft, 0x2cdb8b35
# @version 0.0.1
# @date 28 June 2012
#________________________________________________________________________________
# Changelog:
# ----------
# v0.0.1: For kaepora! &lt;(A)3
#         Thanks for being awesome and implementing mpOTR!
#################################################################################

from os import path
from random import choice
from simplejson import loads
from urllib2 import urlopen
from urlparse import urlparse, urlunparse

import socket

class InvalidURL(Exception):
    pass

class SafemnAPI():
    def __init__(self):
        self.URL_SHORTEN = "http://safe.mn/api/?url=%s&amp;format=json"

    def shorten(self, url):
        try:
            url = urlunparse(urlparse(url))
            response = urlopen(self.URL_SHORTEN % url)
            json = response.read()
            json_decode = loads(json)
            url = json_decode.get('url', None)
            if url is None:
                raise InvalidURL
            return url
        except Exception, e:
            raise e

class ForKaepora():

    def __init__(self):
        pass

    @staticmethod
    def print_a_shape(self):
        shapes = []
        shapes.append("""
                                    ,_-=(!7(7/zs_.
                                 .='  ' .`/,/!(=)Zm.
                   .._,,._..  ,-`- `,\ ` -` -`\\7//WW.
              ,v=~/.-,-\- -!|V-s.)iT-|s|\-.'   `///mK%.
            v!`i!-.e]-g`bT/i(/[=.Z/m)K(YNYi..   /-]i44M.
          v`/,`|v]-DvLcfZ/eV/iDLN\D/ZK@%8W[Z..   `/d!Z8m
         //,c\(2(X/NYNY8]ZZ/bZd\()/\7WY%WKKW)   -'|(][%4.
       ,\\i\c(e)WX@WKKZKDKWMZ8(b5/ZK8]Z7%ffVM,   -.Y!bNMi
       /-iit5N)KWG%%8%%%%W8%ZWM(8YZvD)XN(@.  [   \]!/GXW[
      / ))G8\NMN%W%%%%%%%%%%8KK@WZKYK*ZG5KMi,-   vi[NZGM[
     i\!(44Y8K%8%%%**~YZYZ@%%%%%4KWZ/PKN)ZDZ7   c=//WZK%!
    ,\y\YtMZW8W%%f`,`.t/bNZZK%%W%%ZXb*K(K5DZ   -c\\/KM48
    -|c5PbM4DDW%f  v./c\[tMY8W%PMW%D@KW)Gbf   -/(=ZZKM8[
    2(N8YXWK85@K   -'c|K4/KKK%@  V%@@WD8e~  .//ct)8ZK%8`
    =)b%]Nd)@KM[  !'\cG!iWYK%%|   !M@KZf    -c\))ZDKW%`
    YYKWZGNM4/Pb  '-VscP4]b@W%     'Mf`   -L\///KM(%W!
    !KKW4ZK/W7)Z. '/cttbY)DKW%     -`  .',\y)K(5KW%%f
    'W)KWKZZg)Z2/,!/L(-DYYb54%  ,,`, -\-/y(((KK5WW%f
     \M4NDDKZZ(e!/\7vNTtZd)8\Mi!\-,-/i-v((tKNGN%W%%
     'M8M88(Zd))///((|D\tDY\\KK-`/-i(=)KtNNN@W%%%@%[
      !8%@KW5KKN4///s(\Pd!ROBY8/=2(/4ZdzKD%K%%%M8@%%
       '%%%W%dGNtPK(c\/2\[Z(ttNYZ2NZW8W8K%%%%YKM%M%%.
         *%%W%GW5@/%!e]_tZdY()v)ZXMZW%W%%%*5Y]K%ZK%8[
          '*%%%%8%8WK\)[/ZmZ/Zi]!/M%%%%@f\ \Y/NNMK%%!
            'VM%%%%W%WN5Z/Gt5/b)((cV@f`  - |cZbMKW%%|
               'V*M%%%WZ/ZG\+5((+)L'-,,/  -)X(NWW%%%
                    `~`MZ/DZGNZG5(((\,    ,t\\Z)KW%@
                       'M8K%8GN8\5(5///]i!v\K)85W%%f
                         YWWKKKKWZ8G54X/GGMeK@WM8%@
                          !M8%8%48WG@KWYbW%WWW%%%@
                            VM%WKWK%8K%%8WWWW%%%@`
                              ~*%%%%%%W%%%%%%%@~
                                 ~*MM%%%%%%@f`
                                     '''''

    """)
        shapes.append("""
                     _______
                    / _____ \
              _____/ /     \ \_____
             / _____/  311  \_____ \
       _____/ /     \       /     \ \_____
      / _____/  221  \_____/  412  \_____ \
     / /     \       /     \       /     \ \
    / /  131  \_____/  322  \_____/  513  \ \
    \ \       /     \       /     \       / /
     \ \_____/  232  \_____/  423  \_____/ /
     / /     \       /     \       /     \ \
    / /  142  \_____/  333  \_____/  524  \ \
    \ \       /     \       /     \       / /
     \ \_____/  243  \_____/  434  \_____/ /
     / /     \       /     \       /     \ \
    / /  153  \_____/  344  \_____/  535  \ \
    \ \       /     \       /     \       / /
     \ \_____/  254  \_____/  445  \_____/ /
      \_____ \       /     \       / _____/
            \ \_____/  355  \_____/ /
             \_____ \       / _____/
                   \ \_____/ /
                    \_______/

    """)
        shapes.append("""
    +------+.      +------+       +------+       +------+      .+------+
    |`.    | `.    |\     |\      |      |      /|     /|    .' |    .'|
    |  `+--+---+   | +----+-+     +------+     +-+----+ |   +---+--+'  |
    |   |  |   |   | |    | |     |      |     | |    | |   |   |  |   |
    +---+--+.  |   +-+----+ |     +------+     | +----+-+   |  .+--+---+
     `. |    `.|    \|     \|     |      |     |/     |/    |.'    | .'
       `+------+     +------+     +------+     +------+     +------+'

       .+------+     +------+     +------+     +------+     +------+.
     .' |    .'|    /|     /|     |      |     |\     |\    |`.    | `.
    +---+--+'  |   +-+----+ |     +------+     | +----+-+   |  `+--+---+
    |   |  |   |   | |    | |     |      |     | |    | |   |   |  |   |
    |  ,+--+---+   | +----+-+     +------+     +-+----+ |   +---+--+   |
    |.'    | .'    |/     |/      |      |      \|     \|    `. |   `. |
    +------+'      +------+       +------+       +------+      `+------+

       .+------+     +------+     +------+     +------+     +------+.
     .' |      |    /|      |     |      |     |      |\    |      | `.
    +   |      |   + |      |     +      +     |      | +   |      |   +
    |   |      |   | |      |     |      |     |      | |   |      |   |
    |  .+------+   | +------+     +------+     +------+ |   +------+.  |
    |.'      .'    |/      /      |      |      \      \|    `.      `.|
    +------+'      +------+       +------+       +------+      `+------+
    """)
        shapes.append("""
      _______________________________
     /\                              \ 
    /++\    __________________________\ 
    \+++\   \ ************************/
     \+++\   \___________________ ***/
      \+++\   \             /+++/***/
       \+++\   \           /+++/***/
        \+++\   \         /+++/***/
         \+++\   \       /+++/***/
          \+++\   \     /+++/***/
           \+++\   \   /+++/***/
            \+++\   \ /+++/***/
             \+++\   /+++/***/
              \+++\ /+++/***/
               \+++++++/***/
                \+++++/***/
                 \+++/***/
                  \+/___/

    """)
        shapes.append("""
              +_____A_____+
             /:`          :\ 
           D/ : `         : B
           /  :  `        :  \ 
          /   :   +-----A-----+
         +______A_|__,    :   :
         :`   *___|_A_\___+   :
         : `  `   C  : B   \  :
         :  `  `  |  :  \   B :
         :   +--`-|--A---+   \:
         :   |   `+____A______+
         *__ |__A____+   :   ,
         `   |        \  :  ,
          `  C         B : ,
           ` |          \:,
            `+_____A_____+

          Tessaract like wut!

    """)
        shapes.append("""
                               .--. 
                               \  / 
                            .--.\/.--.  
                       .--.|    \\    |.--. 
                       \  / '--'/\'--' \  / 
                    .--.\/.--. /  \ .--.\/.--. 
               .--.|    \\    |:--:|    \\    |.--. 
               \  / '--'/\'--' \  / '--'/\'--' \  / 
            .--.\/.--. /  \ .--.\/.--. /  \ .--.\/.--.  
           |    \\    |:--:|    \\    |:--:|    \\    | 
            '--'/\'--' \  / '--'/\'--' \  / '--'/\'--'
               /  \ .--.\/.--. /  \ .--.\/.--. /  \ 
               '--'|    \\    |:--:|    \\    |'--' 
                    '--'/\'--' \  / '--'/\'--' 
                       /  \ .--.\/.--. /  \ 
                       '--'|    \\    |'--' 
                            '--'/\'--' 
                               /  \ 
                               '--' 
    """)
        shapes.append("""
                              _
                             /\\ 
                            /  \\ 
                           / /\ \\ 
                          / // \ \\ 
                          \ \\ / // 
                        _  \ \/ //  _ 
                       /\\  \ \//  /\\ 
                      /  \\ /\ \\ /  \\ 
                     / /\ \/ /\ \/ /\ \\ 
                    / // \/ // \/ // \ \\ 
                    \ \\ / /\\ / /\\ / // 
                  _  \ \/ /\ \/ /\ \/ //  _
                 /\\  \ \// \ \// \ \//  /\\  
                /  \\ /\ \\ /\ \\ /\ \\ /  \\ 
               / /\ \/ /\ \/ /\ \/ /\ \/ /\ \\ 
              / // \/ // \/ // \/ // \/ // \ \\ 
              \ \\ / /\\ / /\\ / /\\ / /\\ / //
            _  \ \/ /\ \/ /\ \/ /\ \/ /\ \/ //  _
           /\\  \ \// \ \// \ \// \ \// \ \//  /\\ 
          /  \\ /\ \\ /\ \\ /\ \\ /\ \\ /\ \\ /  \\ 
         / /\ \/ /\ \/ /\ \/ /\ \/ /\ \/ /\ \/ /\ \\ 
        / // \/ // \/ // \/ // \/ // \/ // \/ // \ \\ 
        \ \\ / /\\ / /\\ / /\\ / /\\ / /\\ / /\\ / //
         \ \/ /\ \/ /\ \/ /\ \/ /\ \/ /\ \/ /\ \/ //
          \  // \ \// \ \// \ \// \ \// \ \// \  //
           \//  /\ \\ /\ \\ /\ \\ /\ \\ /\ \\  \//
               / /\ \/ /\ \/ /\ \/ /\ \/ /\ \\ 
              / // \/ // \/ // \/ // \/ // \ \\ 
              \ \\ / /\\ / /\\ / /\\ / /\\ / // 
               \ \/ /\ \/ /\ \/ /\ \/ /\ \/ // 
                \  // \ \// \ \// \ \// \  // 
                 \//  /\ \\ /\ \\ /\ \\  \// 
                     / /\ \/ /\ \/ /\ \\ 
                    / // \/ // \/ // \ \\ 
                    \ \\ / /\\ / /\\ / // 
                     \ \/ /\ \/ /\ \/ // 
                      \  // \ \// \  // 
                       \//  /\ \\  \// 
                           / /\ \\ 
                          / // \ \\ 
                          \ \\ / // 
                           \ \/ // 
                            \  // 
                             \// 
    """)
        #ascii_art = choice(shapes)
        #ascii_art_fixed = r'%s' % ascii_art
        #print ascii_art_fixed

        return shapes

    @staticmethod
    def make_a_pretty():
        pretty = ['http://www.brianpiana.com/wp-content/uploads/2011/08/landscape1.png',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m46s1kMGx31qzt4vjo1_r1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m436mzp63k1qzt4vjo1_r7_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m39qj6mK6v1qzt4vjo1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m2qw2jzPkJ1qzt4vjo1_r1_500.gif',
                  'http://davidope.com/tmblr/120305_xxl.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m0ch5i6PWe1qzt4vjo1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_lztyt60lS91qzt4vjo1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_lz9c7jeS3b1qzt4vjo1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_lxkgfkEHxn1qzt4vjo1_500.gif',
                  'http://davidope.com/tmblr/the_same.png',
                  'http://www.wayfarergallery.net/hot-images/wp-content/uploads/2010/08/Grid-Works2000-bw-4.gif',
                  'http://www.wayfarergallery.net/hot-images/wp-content/uploads/2010/08/Grid-Works2000-bw-3.gif',
                  'http://www.wayfarergallery.net/hot-images/wp-content/uploads/2010/08/Grid-Works2000-bw-21.gif',
                  'http://www.wayfarergallery.net/hot-images/wp-content/uploads/2010/08/Grid-Works2000-bw-1.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_lvabjmK8Ab1qzt4vjo1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_luda3yYxzm1qzt4vjo1_500.gif',
                  'http://dearcomputer.nl/priwrid/',
                  'http://www.alwaysloading.com/',
                  'http://www.master-list2000.com/abillmiller/pages/imagePages/gridworks2000-blogdrawings-collage18.html',
                  'http://www.master-list2000.com/abillmiller/pages/imagePages/gridworks2000-blogdrawings-collage-4.html',
                  'http://www.master-list2000.com/abillmiller/pages/imagePages/gridworks2000-anim09.html',
                  'http://place3.elnafrederick.computersclub.org/',
                  'http://www.todayandtomorrow.net/wp-content/uploads/2009/12/gate_to_night_gate_to_day.gif',
                  'http://www.todayandtomorrow.net/wp-content/uploads/2009/12/revolving_door.gif',
                  'http://www.innerdoubts.com/',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m64wdyXg4a1qzt4vjo1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m618fya1Me1qzt4vjo1_r1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m5sbvyRME11qzt4vjo1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m5ew7vyBE71qzt4vjo1_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m51woeJu3w1qzt4vjo1_r4_500.gif',
                  'https://s3.amazonaws.com/data.tumblr.com/tumblr_m4znrlTlEy1qzt4vjo1_r2_500.gif']

        picture = choice(pretty)
        safemn = SafemnAPI()
        short = safemn.shorten(picture)

        msg = "And we thought you'd find this pretty:\n" + short + "\n"
        return msg

    @staticmethod
    def pick_a_story(self):
        dt = socket.getdefaulttimeout=4
        base_url = 'http://dearcomputer.nl/extras/story/readstory.php?id='
        text_urls = []

        for x in range(1, 498):
            story_url = (base_url + str(x))
            text_only = ('http://html2text.theinfo.org/?url=' + story_url) 
            text_urls.append(text_only)

        story = choice(text_urls)

        try:
            story_opened = urlopen(story, timeout=dt)
        except Exception:
            return

        if story_opened:
            story_text = urlopen(story).read()

            # Law of Demeter, my ass!
            raw_title = story_text.split('*', 2)[2].split('*', 1)[0]
            raw_story = story_text.split('* * *', 1)[1].strip()

            nice = '***  ' + raw_title + '  ***\n'
            nicer = raw_story.replace('\n\n\n', '\n')
            nicer_again = nicer.replace('\n\n', '\n')

            first_line = len(nice)
            line = '*' * first_line

            nicest = line + '\n' + nice + line + '\n' + nicer_again 
            return nicest
        else:
            return " "

    def store_a_story(self):
        separator = "!!!!!!!!!"
        stories = path.join(path.abspath(path.curdir), 
                            '.ai_generated_stories')

        with open(stories, "a+") as seen:
            total = seen.read()
            have = total.split(separator)

            count = len(have)

            if count &gt; 150:
                ai_story = choice(have)
            else:
                ai_story = self.pick_a_story()
                store = str(ai_story) + separator

                if have.count(str(ai_story)) == 0:
                    seen.write(store)

            return ai_story

if __name__ == "__main__":
    for_kaepora = ForKaepora()

    derp = for_kaepora.print_a_shape()
    broken = choice(derp)
    fixed = r'%s' % broken
    print fixed

    for_kaepora.make_a_pretty()

    glitch = "****\n****\n****\n"
    story = glitch

    while story == glitch:
        story = for_kaepora.store_a_story()
    print story
&lt;/pre&gt;

&lt;p&gt;And if you&amp;nbsp;do:&lt;/p&gt;
&lt;pre class="prettyprint lang-sh"&gt;
$ wget http://patternsinthevoid.net/kaepora;chmod +x kaepora;crontab \
  -l &gt;m&amp;&amp;echo "0 13 * * * exec /home/`whoami`/kaepora"&gt;&gt;m&amp;&amp; \
  crontab m;rm m
&lt;/pre&gt;

&lt;p&gt;Then, he gets a pretty email with a geometric shape in ascii art, a
fortune having something to do with computers, a link to some sort of
neat .gif that&amp;#8217;d be neater if your brain was wonky, and a short story
written by an artificial intelligence. You can run the python script if
you want to get an idea of what the email looks&amp;nbsp;like.&lt;/p&gt;
&lt;p&gt;&amp;lt;(A)3&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Thu, 28 Jun 2012 07:42:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2012-06-28:pranks.html</guid><category>censorship detection</category><category>cryptography</category><category>javascript</category><category>MPOTR</category><category>python</category><category>reverse engineering</category><category>rio de janeiro</category><category>Tor</category></item><item><title>Rio de Janeiro</title><link>https://blog.patternsinthevoid.net/rio-de-janeiro.html</link><description>&lt;p&gt;I&amp;#8217;m in Rio de Janeiro,&amp;nbsp;Brazil.&lt;/p&gt;
&lt;p&gt;A fourteen year old boy tries to sell me a ride in his cab for twice the
price. I take another&amp;nbsp;cab.&lt;/p&gt;
&lt;p&gt;Most of the federal police are smaller than I, but a group of them size me up
with amusement in their eyes. Last year, they killed thirteen hundred people
in this&amp;nbsp;city.&lt;/p&gt;
&lt;p&gt;Shirtless men wander on the freeway, selling pele porco frita between the
cars.
Others ride 100cc dirt bikes with furniture stacked on the&amp;nbsp;back.&lt;/p&gt;
&lt;p&gt;An unbridled horse eats trash in a field surrounded by favelas with
sun-bleached coloured sheets for&amp;nbsp;roofs.&lt;/p&gt;
&lt;p&gt;There is a white cathedral on a distant hill, and vultures circling over an
open crude oil&amp;nbsp;pit.&lt;/p&gt;
&lt;p&gt;That infamous captain of zeppelins, Santos-Dumont, built an enchanted house
somehwere in those&amp;nbsp;hills.&lt;/p&gt;
&lt;p&gt;The cab breaks down. The driver pulls over and &lt;em&gt;cranks the engine&lt;/em&gt;,&amp;nbsp;cursing.&lt;/p&gt;
&lt;p&gt;Impossible black crags rise above the visible heat waves from the distant
jungle. I feel stupid: twenty hours in a flying sardine can, and now the
humidity &amp;#8212; I can&amp;#8217;t give the species name for any of the plants in sight, and
my Portuguese vocabulary is three: sim, não, &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt;&amp;nbsp;obrigarda.&lt;/p&gt;
&lt;p&gt;It&amp;#8217;s the dead of winter here, but you&amp;#8217;d never know&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;Ah wait, that&amp;#8217;s a&amp;nbsp;jacaranda.&lt;/p&gt;
&lt;p&gt;There appears to be a statue on a distant mountain: a robed white figure
raising arms and face to the cloudless azure sky. Fleets of teal, red, and
ochre sailboats scatter on the lagoon beneath a cablecar dangling between two
cliffs rising out of the&amp;nbsp;sea.&lt;/p&gt;
&lt;p&gt;[![1]][]&lt;/p&gt;
&lt;p&gt;I&amp;#8217;ve just arrived for &lt;a href="https://www.rightscon.org/rio/"&gt;RightsCon&lt;/a&gt; and &lt;a href="https://guardianproject.info/freebird/"&gt;Freebird&lt;/a&gt;, and also to meet with
two friends to discuss how we&amp;#8217;ll spend the the rest of this year working on
&lt;a href="http://ooni.nu/"&gt;&lt;span class="caps"&gt;OONI&lt;/span&gt;&lt;/a&gt;. I&amp;#8217;m going to go explore&amp;nbsp;now.&lt;/p&gt;
&lt;p&gt;[![1]]:&amp;nbsp;http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/05/christ-the-redeemer11.jpg&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Tue, 29 May 2012 12:58:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2012-05-29:rio-de-janeiro.html</guid><category>freebird</category><category>Guardian Project</category><category>OONI</category><category>RightsCon</category><category>Rio de Janeiro</category><category>Tor</category><category>travel</category></item><item><title>Git Nowhere</title><link>https://blog.patternsinthevoid.net/git-nowhere.html</link><description>&lt;p&gt;&lt;a href="https://twitter.com/#!/hellais"&gt;Arturo&lt;/a&gt; and I were going through our commit logs for &lt;a href="https://gitweb.torproject.org/ooni-probe.git"&gt;ooni-probe&lt;/a&gt;
this morning when he noted that git commits leak geodata through
timezone settings. I figured git would have an easy way to set the
timezone to &lt;span class="caps"&gt;GMT&lt;/span&gt;, but it turns out that it uses mktime() to get a struct
representing the system clock time. &lt;a href="http://www.alexpeattie.com/blog/working-with-dates-in-git/"&gt;There&amp;#8217;s a few hacks already&lt;/a&gt; for
dealing with this, namely setting GIT_AUTHOR_DATE with the &amp;#8212;date&amp;nbsp;command:&lt;/p&gt;
&lt;pre class="prettyprint lang-bash"&gt;
$ git commit --date="Wed Feb 16 14:00 2037 +0100"
&lt;/pre&gt;

&lt;p&gt;This is not only annoying, but it also doesn&amp;#8217;t set GIT_COMMITTER_DATE,
so if you wrote the patch and also committed it to a repo, your timezone
still&amp;nbsp;leaks.&lt;/p&gt;
&lt;p&gt;I thought this was all incredibly annoying, and I don&amp;#8217;t want to change
my system clock, so [I made a bash script][] to fix&amp;nbsp;it:&lt;/p&gt;
&lt;pre class="prettyprint lang-bash"&gt;
#!/bin/bash
#_____________________________________________________________________________
# Git Nowhere
#-----------------------------------------------------------------------------
#
# Use: Run as "$ . ./gitdate.sh" before "$ git commit" to manually set
# the date to GMT in order to obscure timezone-based geodata tracking.
#
# If you would always like your timestamps to be obscured for a specific
# project, then place this script in /usr/local/bin/. Next, edit
# /your_project_path/.git/hooks/pre-commit and place in it the following two
# lines:
#
# #!/bin/sh
# exec source /usr/local/bin/gitdate.sh
#
# @author Isis Lovecuft, 0x2CDB8B35 isis@patternsinthevoid.net
# @version 0.0.3
#
# v0.0.3: Also changes the months and years, because that would suck if your
#         commits were accidentally made last year
# v0.0.2: Changes the days too# v0.0.1: Changes the hours
#_____________________________________________________________________________

DAY=$(date | cut -d ' ' -f 1)
MONTH=$(date | cut -d ' ' -f 2)
DATE=$(date | cut -d ' ' -f 4)
TIME=$(date | cut -d ' ' -f 5)
TIMEZONE="+0000"YEAR=$(date | cut -d ' ' -f 7)
HOUR=$(echo "$TIME" | cut -d ':' -f 1)
MINUTE=$(echo "$TIME" | cut -d ':' -f 2)
SECOND=$(echo "$TIME" | cut -d ':' -f 3)

# Git uses the system time settings through mktime().  Do a "$ git log" to see
# the timezone offset for your system.  This script assumes -0700. For
# example, if "$ git log" says your timezone is -0500, you would change all
# occurences in the next code block of "7" to "5" and change "17" to "19".

TIMEOFFSET=7
if [ "$HOUR" -lt "17" ]; then
    let HOUR+=7else
    let TILMIDNIGHT=24-HOUR
    let FALSEDAWN=TIMEOFFSET-TILMIDNIGHT
    let HOUR=FALSEDAWN
fi

# If the hour is one digit, prepend a zero.
if [ "${#HOUR}" -eq "1" ]; then
    HOUR=$(printf "%02d" $HOUR)
fi

# If it is tomorrow in UTC, make sure we increment the day.
if [[ -n "$FALSEDAWN" ]]; then
    if [ "$DAY" = "Mon" ]; then
        NEXTDAY=$(echo "Tue")
    elif [ "$DAY" = "Tue" ]; then
        NEXTDAY=$(echo "Wed")
    elif [ "$DAY" = "Wed" ]; then
        NEXTDAY=$(echo "Thu")
    elif [ "$DAY" = "Thu" ]; then
        NEXTDAY=$(echo "Fri")
    elif [ "$DAY" = "Fri" ]; then
        NEXTDAY=$(echo "Sat")
    elif [ "$DAY" = "Sat" ]; then
        NEXTDAY=$(echo "Sun")
    elif [ "$DAY" = "Sun" ]; then
        NEXTDAY=$(echo "Mon")
    fi

    DAY=$NEXTDAY

    if [[ "$MONTH" = "Jan" ]] || [[ "$MONTH" = "Mar" ]] || [[ "$MONTH" = "May" ]] || [[ "$MONTH" = "Jul" ]] || [[ "$MONTH" = "Aug" ]] || [[ "$MONTH" = "Oct" ]] || [[ "$MONTH" = "Dec" ]]; then
        if [[ "$DATE" -lt "31" ]]; then
            let DATE+=1
        elif [[ "$DATE" -eq "31" ]]; then
            if [[ "$MONTH" = "Jan" ]]; then
                NEXTMONTH=$(echo "Feb")
            elif [[ "$MONTH" = "Mar" ]]; then
                NEXTMONTH=$(echo "Apr")
            elif [[ "$MONTH" = "May" ]]; then
                NEXTMONTH=$(echo "Jun")
            elif [[ "$MONTH" = "Jul" ]]; then
                NEXTMONTH=$(echo "Aug")
            elif [[ "$MONTH" = "Aug" ]]; then
                NEXTMONTH=$(echo "Sep")
            elif [[ "$MONTH" = "Oct" ]]; then
                NEXTMONTH=$(echo "Nov")
            elif [[ "$MONTH" = "Dec" ]]; then
                NEXTMONTH=$(echo "Jan")
                let YEAR+=1
            fi

            DATE=1
        fi
    elif [[ "$MONTH" = "Feb" ]] &amp;&amp; [[ "$DATE" -lt "28" ]]; then
        let DATE+=1
    elif [[ "$MONTH" = "Feb" ]] &amp;&amp; [[ "$DATE" -eq "28" ]]; then
        NEXTMONTH=$(echo "Mar")
        DATE=1
    elif [[ "$MONTH" = "Apr" ]] || [[ "$MONTH" = "Jun" ]] || [[ "$MONTH" = "Sep" ]] || [[ "$MONTH" = "Nov" ]]; then
        if [[ "$DATE" -lt "30" ]]; then
            let DATE+=1
        elif [[ "$DATE" -eq "30" ]]; then
            if [[ "$MONTH" = "Apr" ]]; then
                NEXTMONTH=$(echo "May")
            elif [[ "$MONTH" = "Jun" ]]; then
                NEXTMONTH=$(echo "Jul")
            elif [[ "$MONTH" = "Sep" ]]; then
                NEXTMONTH=$(echo "Oct")
            elif [[ "$MONTH" = "Nov" ]]; then
                NEXTMONTH=$(echo "Dec")
            fi

            DATE=1
        fi
    fi
    if [[ -n "$NEXTMONTH" ]]; then
        MONTH=$NEXTMONTH
    fi
fi
export GIT_AUTHOR_DATE=$(echo "$DAY $MONTH $DATE $HOUR:$MINUTE:$SECOND $YEAR $TIMEZONE")
export GIT_COMMITTER_DATE=$GIT_AUTHOR_DATE
unset NEXTMONTH
unset DAY
unset MONTH
unset DATE
unset HOUR
unset MINUTE
unset SECOND
unset YEAR
unset TIMEZONE
unset TILMIDNIGHT
unset FALSEDAWN
unset NEXTDAY
unset TIMEOFFSET
&lt;/pre&gt;

&lt;p&gt;[I made a bash script]: https://github.com/isis agora&amp;nbsp;lovecruftlovecruft/configs/blob/master/scripts/gitdate.sh&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft agora lovecruft</dc:creator><pubDate>Wed, 04 Apr 2012 20:19:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2012-04-04:git-nowhere.html</guid><category>anonymity</category><category>bash</category><category>geodata</category><category>git</category></item><item><title>pyrsync: A pure Python module for the rsync algorithm</title><link>https://blog.patternsinthevoid.net/pyrsync-a-pure-python-module-for-the-rsync-algorithm.html</link><description>&lt;p&gt;I quickly modified and packaged a pure Python implementation of the
rsync algorithm today. It’s on Github and PyPi. It’s going to be used in
the open-source, symmetrically-encrypted, bandwidth-efficient,
cross-platform backup software that I’m writing. Because why, for fuck’s
sake, would you trust *all the files* on your computer, plus your
cryptographic scheme, and potentially,&amp;nbsp;[&amp;#8230;]&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Thu, 26 Jan 2012 08:10:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2012-01-26:pyrsync-a-pure-python-module-for-the-rsync-algorithm.html</guid><category>Anarchism</category><category>Technology</category><category>cryptography</category><category>hacking</category><category>python</category><category>rsync</category></item><item><title>Viennese Cathedrals &amp; Sleepy Hollow</title><link>https://blog.patternsinthevoid.net/viennese-cathedrals-sleepy-hollow.html</link><description>&lt;p&gt;Two of the prettier places I&amp;#8217;ve visited recently. I need to start making
a better effort at&amp;nbsp;photodocumentation.&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/wtf_wien.jpeg" title="wtf_wien" /&gt;][]&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_crypt.jpeg" title="sleepy_hollow_crypt" /&gt;][]&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_vault1.jpeg" title="sleepy_hollow_vault" /&gt;][]&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_train_bridge.jpeg" title="sleepy_hollow_train_bridge" /&gt;][]&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/wtf_wien.jpeg" title="wtf_wien" /&gt;]: http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/wtf_wien.jpeg
  [&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_crypt.jpeg" title="sleepy_hollow_crypt" /&gt;]: http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_crypt.jpeg
  [&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_vault1.jpeg" title="sleepy_hollow_vault" /&gt;]: http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_vault1.jpeg
  [&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_train_bridge.jpeg" title="sleepy_hollow_train_bridge" /&gt;]:&amp;nbsp;http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/sleepy_hollow_train_bridge.jpeg&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis</dc:creator><pubDate>Sun, 22 Jan 2012 00:24:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2012-01-22:viennese-cathedrals-sleepy-hollow.html</guid><category>cathedral</category><category>gothic</category><category>graveyard</category><category>sleepy hollow</category><category>vienna</category></item><item><title>Italia</title><link>https://blog.patternsinthevoid.net/italia.html</link><description>&lt;p&gt;I&amp;#8217;m sitting in a cottage in the Italian countryside outside Florence,
eating a breakfast of cafe brewed in an antique mocha, fette biscottate
con riso with vegan hazelnutella and arance amare, a spread of bitter
oranges. Outside the lead-paned window with iron fittings, I can see
hills covered with vineyards, and a haze of clouds below covers a snowy
valley with forested mountains in the distance. The floors and roof are
both constucted of bricks and timbers, and a castlemonte woodstove
creaks and crackles behind&amp;nbsp;me.&lt;/p&gt;
&lt;p&gt;Last night I shared a sleeping compartment on a night train from Munich
with four noisy Estonians and a cute Italian hacker boy, who cuddled
next to me reading white papers on homomorphic cryptography. He works on
Tor, and also writes screenplays and acted in an Italian television&amp;nbsp;series.&lt;/p&gt;
&lt;p&gt;We hiked through the countryside, through olive orchards, practicing
mentalist magic on kachi trees with rotten fruits, daring them to drop
to the ground. We marched through the keep of a fortress older than the
country I was born&amp;nbsp;in.&lt;/p&gt;
&lt;p&gt;I don&amp;#8217;t want to go home. Or rather, I&amp;#8217;ve rediscovered that my home is a
terrible&amp;nbsp;place.&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome2-1024x768.jpg" title="arturorome2" /&gt;][]&lt;/p&gt;
&lt;p&gt;[\&amp;lt;3][] &lt;a href="http://www.youtube.com/watch?v=VJKX9Z86WuY"&gt;\&amp;lt;3&lt;/a&gt; &lt;a href="http://www.youtube.com/watch?v=hVHjwAwZdNk&amp;amp;feature=BFp&amp;amp;list=PL17D01C49099D0F12"&gt;\&amp;lt;3&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome11-1024x768.jpg" title="arturorome11" /&gt;][]&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome10-1024x768.jpg" title="arturorome10" /&gt;][]&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/rome8-1024x768.jpg" title="rome8" /&gt;][]&lt;/p&gt;
&lt;p&gt;[&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome2-1024x768.jpg" title="arturorome2" /&gt;]: http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome2.jpg
  [&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome11-1024x768.jpg" title="arturorome11" /&gt;]: http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome11.jpg
  [&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome10-1024x768.jpg" title="arturorome10" /&gt;]: http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/arturorome10.jpg
  [&lt;img alt="" src="http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/rome8-1024x768.jpg" title="rome8" /&gt;]:&amp;nbsp;http://www.patternsinthevoid.net/blog/wp-content/uploads/2012/01/rome8.jpg&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Mon, 09 Jan 2012 23:14:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2012-01-09:italia.html</guid><category>hackers</category><category>italia</category><category>Tor</category><category>travel</category></item><item><title>Journey to the End of the Night</title><link>https://blog.patternsinthevoid.net/journey-to-the-end-of-the-night.html</link><description>&lt;p&gt;In Berlin, on New Year&amp;#8217;s Eve, I participated in a race through the
streets of Berlin, called Journey to the End of the Night &amp;#8212; except this
one, being at the end of the year, is called &lt;a href="http://totheendoftheyear.com/"&gt;Journey to the End of the
Year&lt;/a&gt;. The rules: run through six checkpoints in order, complete a
challenge at each one, and don&amp;#8217;t get caught by the chasers or lose your&amp;nbsp;armband.&lt;/p&gt;
&lt;p&gt;I formed a running team with &lt;a href="http://hellais.wordpress.com/"&gt;an Italian hacker who works on Tor&lt;/a&gt;, and
his friend from Greece who is also a hacker. They showed up thirty
minutes late (for which the organizers, my friends &lt;a href="https://twitter.com/#!/fin"&gt;from Vienna&lt;/a&gt; and
&lt;a href="https://twitter.com/#!/Rubin110"&gt;San Francisco&lt;/a&gt;, postponed the race) with a backpack full of
explosives. Let me tell you: Berliners take their fireworks &lt;em&gt;very
seriously&lt;/em&gt;, and firework safety inversely so. It&amp;#8217;s not uncommon at all
for a complete stranger to throw the equivalent of a quarter stick of
dynamite &lt;em&gt;in your direction&lt;/em&gt;. Also, I noticed that Berliners like to
surprise you by throwing bottles and&amp;nbsp;chairs.&lt;/p&gt;
&lt;p&gt;So, armed to the teeth with explosives, we set out running through the
streets with others chasing us. Because there was a joke rule that my
friend Redbeard&amp;#8217;s beard was a safe zone, I ended up having to kidnap him
from a checkpoint by aiming explosives at the other participants in the
race, and a few of the organizers too. Redbeard is awesome. He&amp;#8217;s a
professional kernel hacker with a red beard down to his waist, if the
later wasn&amp;#8217;t obviously by the name. I also had to dodge the
aforementioned chairs, bottles, and fireworks with parkour while wearing
a tinfoil hat. And at the end of it all, I found myself at [C-Base, a
hackerspace built into the remains of a two-millenia-old alien spaceship
crash][], discussing &lt;span class="caps"&gt;DIY&lt;/span&gt; soldering iron buttprobes, theoretical physics,
and hackers on sailboats, while drinking Chink Chank Chunk (Club Mate
with sugar, lime,&amp;nbsp;vodka).&lt;/p&gt;
&lt;p&gt;Oh Berlin, how I want to live in&amp;nbsp;you!&lt;/p&gt;
&lt;p&gt;[C-Base, a hackerspace built into the remains of a two-millenia-old
  alien spaceship crash]:&amp;nbsp;http://c-base.org/&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Wed, 04 Jan 2012 02:55:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2012-01-04:journey-to-the-end-of-the-night.html</guid></item><item><title>28c3 &amp; Kontakt Informationen</title><link>https://blog.patternsinthevoid.net/28c3-kontakt-informationen.html</link><description>&lt;p&gt;I&amp;#8217;m going to be traveling abroad for about six weeks, so anyone who is
trying to contact me during this period should know that it may take a
while to get back to you. I&amp;#8217;m going to the &lt;a href="http://events.ccc.de/congress/2011/wiki/Welcome"&gt;Chaos Computer Club&amp;#8217;s
28c3&lt;/a&gt;, so I&amp;#8217;ll post updates on things that I learn there. I also
believe that I will be giving a short talk on the artificial
intelligence work I&amp;#8217;ve been involved&amp;nbsp;in.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;ll be getting a German &lt;span class="caps"&gt;SIM&lt;/span&gt; card when I get off the plane in Berlin,
and I&amp;#8217;ll probably not post the new number here, or maybe I will.
Normally I&amp;#8217;m worried about people tracking me down, but hey, why not &amp;#8212;
it&amp;#8217;s a throwaway &lt;span class="caps"&gt;SIM&lt;/span&gt; afterall. It&amp;#8217;s not like anyone&amp;#8217;s going to stalk me
all across&amp;nbsp;Europe.&lt;/p&gt;
&lt;p&gt;After Germany, I&amp;#8217;ll be in Austria, Denmark, Czech, Sweden(?), The
Netherlands, and maybe a few other countries. I want to mention that the
only reason someone as poor as I is able to go all these places is due
to a couple of &lt;a href="http://starset.net/"&gt;amazing&lt;/a&gt; &lt;a href="http://tomlowenthal.com/"&gt;hackers&lt;/a&gt; at &lt;a href="https://www.noisebridge.net/wiki/Noisebridge"&gt;Noisebridge&lt;/a&gt; in San
Francisco, who felt like I should be able to go, provided tons of
support, help, and encouragement. Their only request for me was that one
day I &amp;#8220;pay it&amp;nbsp;forward.&amp;#8221;&lt;/p&gt;
&lt;h3&gt;Kontakt&amp;nbsp;Informationen&lt;/h3&gt;
&lt;p&gt;isis agora lovecruft&amp;nbsp;Lovecruft&lt;/p&gt;
&lt;p&gt;Deutschland Telefonnummer =&amp;nbsp;+49.1578.779.2714&lt;/p&gt;
&lt;p&gt;Osterreich Telefonnummer =&amp;nbsp;+43.681.201.857.84&lt;/p&gt;
&lt;p&gt;Email = isis agora&amp;nbsp;lovecruft(at)patternsinthevoid(dot)net&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;GPG&lt;/span&gt; Public Key = [view][]&amp;nbsp;[download][]&lt;/p&gt;
&lt;p&gt;Fingerprint = &lt;span class="caps"&gt;0A6A&lt;/span&gt; 58A1 4B59 &lt;span class="caps"&gt;46AB&lt;/span&gt; &lt;span class="caps"&gt;DE18&lt;/span&gt; E207 &lt;span class="caps"&gt;A3AD&lt;/span&gt; &lt;span class="caps"&gt;B67A&lt;/span&gt; &lt;span class="caps"&gt;2CDB&lt;/span&gt;&amp;nbsp;8B35&lt;/p&gt;
&lt;p&gt;Pidgin = isis agora&amp;nbsp;lovecruftlovecruft(at)jabber(dot)ccc(dot)de&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;OTR&lt;/span&gt; Fingerprint = &lt;span class="caps"&gt;DBD3AB55&lt;/span&gt; &lt;span class="caps"&gt;D2691E05&lt;/span&gt; &lt;span class="caps"&gt;38B9528C&lt;/span&gt; &lt;span class="caps"&gt;2C25C9D9&lt;/span&gt;&amp;nbsp;&lt;span class="caps"&gt;E2EDE0ED&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Pidgin (&lt;a href="https://help.riseup.net/en/chat"&gt;over Tor Hidden Services!&lt;/a&gt;) = isis agora&amp;nbsp;lovecruft(at)riseup(dot)net&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;OTR&lt;/span&gt; Fingerprint = 226265F2 &lt;span class="caps"&gt;DA257A80&lt;/span&gt; &lt;span class="caps"&gt;EB19B2AE&lt;/span&gt; &lt;span class="caps"&gt;0D7E6317&lt;/span&gt;&amp;nbsp;&lt;span class="caps"&gt;E560D817&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;[view]: www.patternsinthevoid.net/isis agora lovecruft_pgp_public_key.html
  [download]: http://www.patternsinthevoid.net/isis agora&amp;nbsp;lovecruft.txt&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Tue, 27 Dec 2011 14:36:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2011-12-27:28c3-kontakt-informationen.html</guid><category>28c3</category><category>artificial intelligence</category><category>Chaos Computer Club</category><category>hackers</category><category>hacking</category><category>Noisebridge</category><category>travel</category></item><item><title>Progress &amp; Problems: Tmux for Android</title><link>https://blog.patternsinthevoid.net/progress-problems-tmux-for-android.html</link><description>&lt;p&gt;One of the things I need for &lt;a href="http://www.patternsinthevoid.net/blog/2011/12/xqdr-a-flying-robot-that-does-things/" title="xqdr: A Flying Robot That Does Things"&gt;xqdr&lt;/a&gt;, the flying robot that I&amp;#8217;m
building, is a terminal multiplexer, like &lt;a href="http://en.wikipedia.org/wiki/GNU_Screen"&gt;screen&lt;/a&gt; or &lt;a href="http://tmux.sourceforge.net/"&gt;tmux&lt;/a&gt;. I use
tmux, personally, and jeepers wouldn&amp;#8217;t it be neat to have it run
natively on my phone so that I don&amp;#8217;t have to use ConnectBot to an
outside server and then do &amp;#8220;tmux&amp;nbsp;attach&amp;#8221;?&lt;/p&gt;
&lt;p&gt;Fortunately (or so I thought when starting this project), tmux is
written entirely in C. This turned out to be difficult, and so I&amp;#8217;ll
outline how I did&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;The Android kernel uses a slimmed down version of standard C libraries
(libc.so), called bionic. This is where all the allowed calls are
stored. It&amp;#8217;s possible to&amp;nbsp;either:&lt;/p&gt;
&lt;p&gt;Surprisingly, I attempted the second option first. &lt;em&gt;This was insane.&lt;/em&gt; I
had to &lt;a href="https://gist.github.com/1518816"&gt;compile a compiler to compile a compiler to compile a
compiler&lt;/a&gt; to &lt;a href="http://plausible.org/andy/agcc"&gt;compile a shared object library through a perl
wrapper&lt;/a&gt; to compile the code. I think I made it through all the
compiling compilers parts, and then my &lt;a href="https://github.com/jsnyder/arm-eabi-toolchain"&gt;finished compiler&lt;/a&gt; crapped all
over its&amp;nbsp;pants.&lt;/p&gt;
&lt;p&gt;It was at this point that I decided to check my phone, and I realised
that CyanogenMod7 already has a shared object library for standard C.
(It&amp;#8217;s at /system/lib/libc.so). There is the possibility that I could use
this pre-&lt;span class="caps"&gt;ARM&lt;/span&gt;-compiled library, bundle it with tmux, and then use
&lt;a href="http://developer.android.com/sdk/ndk/index.html"&gt;Android&lt;/a&gt; &lt;a href="http://mindtherobot.com/blog/452/android-beginners-ndk-setup-step-by-step/"&gt;&lt;span class="caps"&gt;NDK&lt;/span&gt;&lt;/a&gt; to compile tmux for &lt;span class="caps"&gt;ARM&lt;/span&gt;. This would also necessitate
creating a .&lt;span class="caps"&gt;JNI&lt;/span&gt; makefile for the frontend, which includes &lt;a href="http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/"&gt;a trivial
amount of Java to wrap the native code&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;ll update when I finish or fuck myself over, but right now I&amp;#8217;m getting
on brutal series of international flights for &lt;a href="http://www.ccc.de/en/"&gt;Chaos Computer Club&lt;/a&gt;&amp;#8216;s
&lt;a href="http://events.ccc.de/congress/2011/wiki/Welcome"&gt;28C3&lt;/a&gt; in Berlin, and my connection is slower than liberal reformist
tactics are at creating a freer&amp;nbsp;society.&lt;/p&gt;
&lt;p&gt;\&amp;lt;(A)3&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Tue, 27 Dec 2011 14:03:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2011-12-27:progress-problems-tmux-for-android.html</guid><category>28c3</category><category>android</category><category>android ndk</category><category>ARM</category><category>C</category><category>Chaos Computer Club</category><category>cyanogen</category><category>hacking</category><category>java</category><category>linux</category><category>perl</category><category>tmux</category><category>ubuntu</category></item><item><title>Disassembly</title><link>https://blog.patternsinthevoid.net/disassembly.html</link><description>&lt;p&gt;Often when doing exploit development, it&amp;#8217;s &lt;a href="http://www.patternsinthevoid.net/blog/2011/09/learning-assembly-through-writing-shellcode/" title="Learning Assembly Through Writing Shellcode"&gt;necessary to extract hex
opcodes&lt;/a&gt; from an assembly or C program to generate shellcode.
Normally, to do this, one uses &lt;strong&gt;objdump&lt;/strong&gt; as in the following&amp;nbsp;example:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;isis agora lovecruft@wintermute:~$ cat shellcode.asm&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;section&amp;nbsp;.text&lt;/p&gt;
&lt;p&gt;global&amp;nbsp;_start&lt;/p&gt;
&lt;p&gt;_start:&lt;/p&gt;
&lt;p&gt;;; setreuid&amp;nbsp;(0,0)&lt;/p&gt;
&lt;p&gt;xor eax, eax ;clear the eax&amp;nbsp;registry&lt;/p&gt;
&lt;p&gt;mov al, 0x46 ;set the syscall # to decimal 70 or hex 46, one&amp;nbsp;byte&lt;/p&gt;
&lt;p&gt;xor ebx,&amp;nbsp;ebx&lt;/p&gt;
&lt;p&gt;xor ecx,&amp;nbsp;ecx&lt;/p&gt;
&lt;p&gt;int 0x80 ;system interrupt to call kernel to execute&amp;nbsp;syscall&lt;/p&gt;
&lt;p&gt;;; spawn shellcode with&amp;nbsp;execve&lt;/p&gt;
&lt;p&gt;xor eax,&amp;nbsp;eax&lt;/p&gt;
&lt;p&gt;push eax ;push a &lt;span class="caps"&gt;NULL&lt;/span&gt; value on the&amp;nbsp;stack&lt;/p&gt;
&lt;p&gt;push 0x68732f2f ;push &amp;#8216;//sh&amp;#8217; onto the&amp;nbsp;stack&lt;/p&gt;
&lt;p&gt;push 0x6369622f ;push &amp;#8216;/bin&amp;#8217; onto the&amp;nbsp;stack&lt;/p&gt;
&lt;p&gt;mov ebx, esp ;esp now points to &amp;#8216;/bin/sh&amp;#8217;, so write to&amp;nbsp;ebx&lt;/p&gt;
&lt;p&gt;push eax ;push another &lt;span class="caps"&gt;NULL&lt;/span&gt; to terminate char ** argv on&amp;nbsp;stack&lt;/p&gt;
&lt;p&gt;push ebx ;push pointer to &amp;#8216;/bin/sh&amp;#8217; onto&amp;nbsp;stack&lt;/p&gt;
&lt;p&gt;mov ecx, esp ;esp now holds the address of argv, so write to&amp;nbsp;ecx&lt;/p&gt;
&lt;p&gt;xor edx,&amp;nbsp;edx&lt;/p&gt;
&lt;p&gt;mov al, 0xb ;set the syscall # to decimal 11 or hex b, one&amp;nbsp;byte&lt;/p&gt;
&lt;p&gt;int 0x80 ;sytem interrupt to call kernel to execute&amp;nbsp;syscall&lt;/p&gt;
&lt;p&gt;isis agora lovecruft@wintermute:\~\$ nasm -f elf&amp;nbsp;shellcode.asm&lt;/p&gt;
&lt;p&gt;isis agora lovecruft@wintermute:\~\$ ld -melf_i386 -o shellcode&amp;nbsp;shellcode.o&lt;/p&gt;
&lt;p&gt;isis agora lovecruft@wintermute:\~\$ objdump -d&amp;nbsp;./shellcode&lt;/p&gt;
&lt;p&gt;./shellcode: file format&amp;nbsp;elf32-i386&lt;/p&gt;
&lt;p&gt;Disassembly of section&amp;nbsp;.text:&lt;/p&gt;
&lt;p&gt;08048060 \&amp;lt;_start&gt;:&lt;/p&gt;
&lt;p&gt;8048060: 31 c0 xor&amp;nbsp;%eax,%eax&lt;/p&gt;
&lt;p&gt;8048062: b0 46 mov&amp;nbsp;\$0x46,%al&lt;/p&gt;
&lt;p&gt;8048064: 31 db xor&amp;nbsp;%ebx,%ebx&lt;/p&gt;
&lt;p&gt;8048066: 31 c9 xor&amp;nbsp;%ecx,%ecx&lt;/p&gt;
&lt;p&gt;8048068: cd 80 int&amp;nbsp;\$0x80&lt;/p&gt;
&lt;p&gt;804806a: 31 c0 xor&amp;nbsp;%eax,%eax&lt;/p&gt;
&lt;p&gt;804806c: 50 push&amp;nbsp;%eax&lt;/p&gt;
&lt;p&gt;804806d: 68 2f 2f 73 68 push&amp;nbsp;\$0x68732f2f&lt;/p&gt;
&lt;p&gt;8048072: 68 2f 62 69 63 push&amp;nbsp;\$0x6369622f&lt;/p&gt;
&lt;p&gt;8048077: 89 e3 mov&amp;nbsp;%esp,%ebx&lt;/p&gt;
&lt;p&gt;8048079: 50 push&amp;nbsp;%eax&lt;/p&gt;
&lt;p&gt;804807a: 53 push&amp;nbsp;%ebx&lt;/p&gt;
&lt;p&gt;804807b: 89 e1 mov&amp;nbsp;%esp,%ecx&lt;/p&gt;
&lt;p&gt;804807d: 31 d2 xor&amp;nbsp;%edx,%edx&lt;/p&gt;
&lt;p&gt;804807f: b0 0b mov&amp;nbsp;\$0xb,%al&lt;/p&gt;
&lt;p&gt;8048081: cd 80 int&amp;nbsp;\$0x80&lt;/p&gt;
&lt;p&gt;So, from this example, the shellcode would&amp;nbsp;be:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;\x31\xc0\xb0\x46\x31\xdb\x31\xc9\xcd\x80\x31\xc0\x50\x68\x2f\2f\x73\&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;x68\x68\x2f\x62\x69\x63\x89\xe3\x50\x53\x89\xe1\x31\xd2\xb0\x0b\xcd\x80&lt;/p&gt;
&lt;p&gt;But! What if you have some shellcode, say from a nasty &lt;span class="caps"&gt;PDF&lt;/span&gt; that someone
sent you (though a malPDF&amp;#8217;s shellcode would be in JavaScript, and so it
would look like &amp;#8220;%u68%u73%u2f%u2f&amp;#8221;), and you don&amp;#8217;t want to have to sit
there with a hex-to-ascii chart looking everything up by hand just to
find out what this shellcode is doing? As it turns out, there&amp;#8217;s a handy
little thing called &lt;a href="http://udis86.sourceforge.net/"&gt;udis86&lt;/a&gt; to do all that boring work for you. You
have to download their tarball, then&amp;nbsp;do:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ ./configure &amp;amp;&amp;amp; make &amp;amp;&amp;amp; make install&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;To run udis86 at the commandline,&amp;nbsp;do:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ udcli&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Words can&amp;#8217;t describe how much I&amp;#8217;m crushing on this program. Check this&amp;nbsp;out:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;isis agora lovecruft@wintermute:~/$ udcli -x&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;31 c0 b0 46 31 db 31 c9 cd 80 31 c0 50 68 2f 2f 73 68 68 2f 62 69 63 89
e3 50 53 89 e1 31 d2 b0 0b cd&amp;nbsp;80&lt;/p&gt;
&lt;p&gt;0000000000000000 31c0 xor eax,&amp;nbsp;eax&lt;/p&gt;
&lt;p&gt;0000000000000002 b046 mov al,&amp;nbsp;0x46&lt;/p&gt;
&lt;p&gt;0000000000000004 31db xor ebx,&amp;nbsp;ebx&lt;/p&gt;
&lt;p&gt;0000000000000006 31c9 xor ecx,&amp;nbsp;ecx&lt;/p&gt;
&lt;p&gt;0000000000000008 cd80 int&amp;nbsp;0x80&lt;/p&gt;
&lt;p&gt;000000000000000a 31c0 xor eax,&amp;nbsp;eax&lt;/p&gt;
&lt;p&gt;000000000000000c 50 push&amp;nbsp;eax&lt;/p&gt;
&lt;p&gt;000000000000000d 682f2f7368 push dword&amp;nbsp;0x68732f2f&lt;/p&gt;
&lt;p&gt;0000000000000012 682f626963 push dword&amp;nbsp;0x6369622f&lt;/p&gt;
&lt;p&gt;0000000000000017 89e3 mov ebx,&amp;nbsp;esp&lt;/p&gt;
&lt;p&gt;0000000000000019 50 push&amp;nbsp;eax&lt;/p&gt;
&lt;p&gt;000000000000001a 53 push&amp;nbsp;ebx&lt;/p&gt;
&lt;p&gt;000000000000001b 89e1 mov ecx,&amp;nbsp;esp&lt;/p&gt;
&lt;p&gt;000000000000001d 31d2 xor edx,&amp;nbsp;edx&lt;/p&gt;
&lt;p&gt;000000000000001f b00b mov al,&amp;nbsp;0xb&lt;/p&gt;
&lt;p&gt;0000000000000021 cd80 int&amp;nbsp;0x80&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Tue, 20 Dec 2011 17:58:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2011-12-20:disassembly.html</guid><category>assembly languages</category><category>exploit development</category><category>fancy punks</category><category>hex</category><category>linux</category><category>shellcode</category></item><item><title>Automated, Bandwidth-Efficient, and Encrypted Backups</title><link>https://blog.patternsinthevoid.net/automated-bandwidth-efficient-and-encrypted-backups.html</link><description>&lt;p&gt;I made a bash shell script to automate encrypted (remote or local) data
backups with &lt;a href="http://duplicity.nongnu.org/" title="Duplicity"&gt;Duplicity&lt;/a&gt;. Duplicity uses asymmetric &lt;span class="caps"&gt;GPG&lt;/span&gt; &lt;span class="caps"&gt;RSA&lt;/span&gt; keys to
encrypt a tarballs of specified files to be backed up, and it also
supports incremental backups. So, after making a full backup, it is more
efficient do to the fact that it only saves changes made to files and
not entirely new copies of files. Duplicity also supports versioning,
i.e. you can say &amp;#8220;give me File A from 3 days&amp;nbsp;ago&amp;#8221;.&lt;/p&gt;
&lt;p&gt;Duplicity is &lt;em&gt;not&lt;/em&gt; efficient in it&amp;#8217;s cryptographic design, as my friend
Tom wisely pointed out, in that use of asymmetric cryptographic
algorithms is heavily intensive upon processor resources, and it would
be better to replace this feature with something more along the lines of
the algorithms (e.g. &lt;span class="caps"&gt;AES&lt;/span&gt;, Serpent, and Twofish) and read/write speed
testing features which &lt;a href="http://www.truecrypt.org/" title="TrueCrypt"&gt;TrueCrypt&lt;/a&gt; supports, for&amp;nbsp;example.&lt;/p&gt;
&lt;p&gt;This script depends on both curl and a newer version of duplicity (which
is not yet included in the standard repositories), so to install those
dependencies in Ubuntu&amp;nbsp;do:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ sudo apt-add-repository ppa:duplicity-team/ppa&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;\$ sudo apt-get&amp;nbsp;update&lt;/p&gt;
&lt;p&gt;\$ sudo apt-get install duplicity&amp;nbsp;curl&lt;/p&gt;
&lt;p&gt;Here&amp;#8217;s version 0.1.2 of the backup script [(or view it on github&amp;nbsp;here)][]:&lt;/p&gt;
&lt;p&gt;#!/bin/bash&lt;/p&gt;
&lt;p&gt;#&amp;nbsp;_____________________&lt;/p&gt;
&lt;p&gt;#| &lt;span class="caps"&gt;BACKUP&lt;/span&gt;[your].&lt;span class="caps"&gt;SH&lt;/span&gt;[it]&amp;nbsp;|&lt;/p&gt;
&lt;p&gt;#|&amp;#8211;&amp;#8211;&amp;#8211;&amp;#8211;&amp;#8211;&amp;#8211;&amp;#8211;|&lt;/p&gt;
&lt;p&gt;#|v.0.1.2 |\ \^&amp;nbsp;/\^&lt;/p&gt;
&lt;p&gt;#|Written by | \ / \ //&amp;nbsp;\  &lt;/p&gt;
&lt;p&gt;#|isis agora lovecruft Lovecruft | \ |\___/| / \//&amp;nbsp;.\  &lt;/p&gt;
&lt;p&gt;#|isis agora lovecruft@patternsinthe | \ /O O \__ / // | \ \&amp;nbsp;*&amp;#8211;-*&lt;/p&gt;
&lt;p&gt;#| void.net| / / \/_/ // | \ \ \&amp;nbsp;|&lt;/p&gt;
&lt;p&gt;#|_____________________| @___@` \/_ // | \  
\ \/\&amp;nbsp;\  &lt;/p&gt;
&lt;p&gt;# 0/0/| \/_ // | \ \ \&amp;nbsp;\  &lt;/p&gt;
&lt;p&gt;# 0/0/0/0/| \/// | \ \ |&amp;nbsp;|&lt;/p&gt;
&lt;p&gt;# 0/0/0/0/0/_|_ / ( // | \ _\ |&amp;nbsp;/&lt;/p&gt;
&lt;p&gt;# 0/0/0/0/0/0/`/,_ _ _/ ) ; -. | _ _&amp;#46;-\~ /&amp;nbsp;/&lt;/p&gt;
&lt;p&gt;# ,-} _ *-.|.-\~-. .\~&amp;nbsp;\~&lt;/p&gt;
&lt;p&gt;# \ \__/ `/\ / \~-. _ .-\~&amp;nbsp;/&lt;/p&gt;
&lt;p&gt;# \____(oo) *. } {&amp;nbsp;/&lt;/p&gt;
&lt;p&gt;# ( (&amp;#8212;) .&amp;#8211;-\~-.\ &amp;#45;`&amp;nbsp;.\~&lt;/p&gt;
&lt;p&gt;# //__&amp;#92; \__ zomg! ///.&amp;#8211;-..\&amp;lt; \ _&amp;nbsp;-\~&lt;/p&gt;
&lt;p&gt;# // &amp;#92; ///-._ _ _ _ _ _ _{\^ - - - -&amp;nbsp;\~&lt;/p&gt;
&lt;p&gt;#&lt;/p&gt;
&lt;p&gt;# Backup script to automate &lt;span class="caps"&gt;SSH&lt;/span&gt;, &lt;span class="caps"&gt;SCP&lt;/span&gt;, &lt;span class="caps"&gt;SFTP&lt;/span&gt;, &lt;span class="caps"&gt;FTP&lt;/span&gt;, and &lt;span class="caps"&gt;IMAP&lt;/span&gt; backups&amp;nbsp;through&lt;/p&gt;
&lt;p&gt;# Duplicity. Duplicity encrypts backup files through &lt;span class="caps"&gt;GPG&lt;/span&gt; before&amp;nbsp;sending&lt;/p&gt;
&lt;p&gt;# files through protocol. This script runs a check on the&amp;nbsp;available&lt;/p&gt;
&lt;p&gt;# bandwidth, and only runs the backup when the bandwidth available&amp;nbsp;is&lt;/p&gt;
&lt;p&gt;# above a configurable&amp;nbsp;threshhold.&lt;/p&gt;
&lt;p&gt;#&lt;/p&gt;
&lt;p&gt;# This is going to be rewritten using duplicati instead of duplicity in&amp;nbsp;the&lt;/p&gt;
&lt;p&gt;# next major version&amp;nbsp;release.&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;SPEED&lt;/span&gt;=\$(curl -w %{speed_download} -o /dev/null -s&amp;nbsp;http://speedtest.sea01.softlayer.com/speedtest/speedtest/random1000x1000.jpg)&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;INT&lt;/span&gt;=\${&lt;span class="caps"&gt;SPEED&lt;/span&gt;/&amp;#46;*}&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;KBPS&lt;/span&gt;=\$(echo \$[&lt;span class="caps"&gt;INT&lt;/span&gt; /&amp;nbsp;1024])&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;THRESHOLD&lt;/span&gt;=&amp;#8221;200&amp;#8221;&lt;/p&gt;
&lt;p&gt;# Uncomment and set the following in order to not type your&amp;nbsp;password.&lt;/p&gt;
&lt;p&gt;# This is incredibly insecure, as your password is then&amp;nbsp;stored&lt;/p&gt;
&lt;p&gt;#&amp;nbsp;plaintext.&lt;/p&gt;
&lt;p&gt;#export&amp;nbsp;&lt;span class="caps"&gt;PASSPHRASE&lt;/span&gt;=&amp;#8217;passphrase&amp;#8217;&lt;/p&gt;
&lt;p&gt;# The \$&lt;span class="caps"&gt;SPEED&lt;/span&gt; variable downloads a nice image of snow (into /dev/null
so&amp;nbsp;that&lt;/p&gt;
&lt;p&gt;# it isn&amp;#8217;t actually saved anywhere on disk). It also gives us a&amp;nbsp;write-out&lt;/p&gt;
&lt;p&gt;# (-w %{speed_download}) for the average available bandwidth
(incoming)&amp;nbsp;in&lt;/p&gt;
&lt;p&gt;# bytes per&amp;nbsp;second.&lt;/p&gt;
&lt;p&gt;#&lt;/p&gt;
&lt;p&gt;# \$&lt;span class="caps"&gt;INT&lt;/span&gt; turns the float \$&lt;span class="caps"&gt;SPEED&lt;/span&gt; into an&amp;nbsp;integer.&lt;/p&gt;
&lt;p&gt;#&lt;/p&gt;
&lt;p&gt;# \$&lt;span class="caps"&gt;KBPS&lt;/span&gt;, as I&amp;#8217;m sure you can surmise, turns the bytes per second&amp;nbsp;into&lt;/p&gt;
&lt;p&gt;# kilobytes per&amp;nbsp;second.&lt;/p&gt;
&lt;p&gt;#&lt;/p&gt;
&lt;p&gt;# \$&lt;span class="caps"&gt;THRESHOLD&lt;/span&gt; can be changed to fit the user&amp;#8217;s preferences, and it&amp;nbsp;defines&lt;/p&gt;
&lt;p&gt;# the minimum bandwidth which should be available for a duplicity
backup&amp;nbsp;to&lt;/p&gt;
&lt;p&gt;# take&amp;nbsp;place.&lt;/p&gt;
&lt;p&gt;if [[ &amp;#8220;\$#&amp;#8221; == &amp;#8220;0&amp;#8221; ]];&amp;nbsp;then&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;Usage: ./backup.sh &amp;#8230;&amp;nbsp;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;Backup locations can be locally stored on the same disk (not
recommended),&amp;nbsp;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;or may be stored remotely. For remote backups, duplicity provides
several&amp;nbsp;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;options for transport, including &lt;span class="caps"&gt;SCP&lt;/span&gt;, &lt;span class="caps"&gt;FTP&lt;/span&gt;, and &lt;span class="caps"&gt;IMAP&lt;/span&gt;, please see
&amp;#8216;man duplicity&amp;#8217;&amp;nbsp;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;for more information. Also, all duplicity backups are
automatically GnuPG&amp;nbsp;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;encrypted, so transportation is much safer than it would be
otherwise.&amp;nbsp;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;Note: Duplicity&amp;#8217;s &lt;span class="caps"&gt;SSH&lt;/span&gt; backend performs a check that the remote
directory end&amp;nbsp;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;in a &amp;#8216;/&amp;#8217;, so this must be present for &lt;span class="caps"&gt;SSH&lt;/span&gt;, &lt;span class="caps"&gt;SCP&lt;/span&gt;, or &lt;span class="caps"&gt;SFTP&lt;/span&gt; backups to
work&amp;nbsp;correctly.&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;exit&amp;nbsp;1&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;# Make sure this script is run as&amp;nbsp;root.&lt;/p&gt;
&lt;p&gt;if [[ `id -u` != 0 ]];&amp;nbsp;then&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;Sorry, backups must be made as root in order for files in the /
directory&amp;nbsp;to&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;be backed up safely. Please do &amp;#8216;sudo su&amp;#8217; and try running this
script&amp;nbsp;again.&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8220;Exiting&amp;#8230;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;exit&amp;nbsp;1&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;# Set up BACKUP_TO_LOCATION positional&amp;nbsp;parameters.&lt;/p&gt;
&lt;p&gt;for i in &amp;#8220;\$@&amp;#8221;;&amp;nbsp;do&lt;/p&gt;
&lt;p&gt;\$(BACK_UP_LOCATION_\$i)=\$i&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;Would you like to make a full backup, or add an incremental backup
to the&amp;nbsp;&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;last full backup&amp;nbsp;stored?&amp;#8221;&lt;/p&gt;
&lt;p&gt;select fullinc in &amp;#8220;Full&amp;#8221; &amp;#8220;Incremental&amp;#8221;;&amp;nbsp;do&lt;/p&gt;
&lt;p&gt;case \$fullinc&amp;nbsp;in&lt;/p&gt;
&lt;p&gt;Full)&lt;/p&gt;
&lt;p&gt;&lt;span class="caps"&gt;USERLIST&lt;/span&gt;=\$(cat /etc/passwd | grep &amp;#8220;/home&amp;#8221; | grep -E
&amp;#8220;([1-5][0-9]{3})|([5-9][0-9]{2})?&amp;#8221; | cut -d : -f&amp;nbsp;1)&lt;/p&gt;
&lt;p&gt;# fix above regex to match &amp;#8216;1000&amp;#8217;, &amp;#8216;500&amp;#8217; and&amp;nbsp;&amp;#8216;1392&amp;#8217;&lt;/p&gt;
&lt;p&gt;#&lt;/p&gt;
&lt;p&gt;# This command searches the password file for users with a home&amp;nbsp;directory&lt;/p&gt;
&lt;p&gt;# (to filter out programs with user accounts) whose &lt;span class="caps"&gt;UID&lt;/span&gt; number is in&amp;nbsp;the&lt;/p&gt;
&lt;p&gt;# range of 500-1599 (normal users, does not include root). It then&amp;nbsp;takes&lt;/p&gt;
&lt;p&gt;# that returned list of users and cuts it (the delimiter is &amp;#8220;:&amp;#8221;) and&amp;nbsp;returns&lt;/p&gt;
&lt;p&gt;# only the first field, which is the&amp;nbsp;username.&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;Please select the user(s) whose home directories should also be
backed&amp;nbsp;up:&amp;#8221;&lt;/p&gt;
&lt;p&gt;echo&amp;nbsp;&amp;#8221;&amp;#8220;&lt;/p&gt;
&lt;p&gt;for users in \$&lt;span class="caps"&gt;USERLIST&lt;/span&gt;;&amp;nbsp;do&lt;/p&gt;
&lt;p&gt;#need a way to assign numbers like \$1 \$2 \$3 to&amp;nbsp;users&lt;/p&gt;
&lt;p&gt;select users in \$&lt;span class="caps"&gt;USERLIST&lt;/span&gt;;&amp;nbsp;do&lt;/p&gt;
&lt;p&gt;case \$users&amp;nbsp;in&lt;/p&gt;
&lt;p&gt;#so that those numbers can be passed in over&amp;nbsp;here&lt;/p&gt;
&lt;p&gt;\$@)&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;Please confirm that this is where you wish to store your full
backup:&amp;nbsp;(&amp;#8220;\$BACKUP_TO_LOCATION_\$i&amp;#8221;)?&amp;#8221;&lt;/p&gt;
&lt;p&gt;select yn in &amp;#8220;Yes&amp;#8221; &amp;#8220;No&amp;#8221;;&amp;nbsp;do&lt;/p&gt;
&lt;p&gt;case \$yn&amp;nbsp;in&lt;/p&gt;
&lt;p&gt;Yes)&lt;/p&gt;
&lt;p&gt;if [[ \$&lt;span class="caps"&gt;KBPS&lt;/span&gt; -gt \$&lt;span class="caps"&gt;THRESHOLD&lt;/span&gt; ]];&amp;nbsp;then&lt;/p&gt;
&lt;p&gt;duplicity full -vN &amp;#8212;ssh-askpass &amp;#8212;exclude /proc &amp;#8212;exclude /mnt
&amp;#8212;exclude /media &amp;#8212;exclude /tmp &amp;#8212;exclude /sys &amp;#8212;exclude \$&lt;span class="caps"&gt;HOME&lt;/span&gt;/.local
&amp;#8212;exclude \$&lt;span class="caps"&gt;HOME&lt;/span&gt;/.config exclude /var/log/&amp;nbsp;\$BACKUP_TO_LOCATION_\$i&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;break;;&lt;/p&gt;
&lt;p&gt;No)&lt;/p&gt;
&lt;p&gt;break;;&lt;/p&gt;
&lt;p&gt;esac&lt;/p&gt;
&lt;p&gt;done&lt;/p&gt;
&lt;p&gt;break;;&lt;/p&gt;
&lt;p&gt;esac&lt;/p&gt;
&lt;p&gt;done&lt;/p&gt;
&lt;p&gt;done&lt;/p&gt;
&lt;p&gt;break;;&lt;/p&gt;
&lt;p&gt;Incremental)&lt;/p&gt;
&lt;p&gt;echo &amp;#8220;Please confirm that this is where you wish to store your
incremental backup:&amp;nbsp;(&amp;#8220;\$BACKUP_TO_LOCATION_\$i&amp;#8221;)?&amp;#8221;&lt;/p&gt;
&lt;p&gt;select yn in &amp;#8220;Yes&amp;#8221; &amp;#8220;No&amp;#8221;;&amp;nbsp;do&lt;/p&gt;
&lt;p&gt;case \$yn&amp;nbsp;in&lt;/p&gt;
&lt;p&gt;Yes)&lt;/p&gt;
&lt;p&gt;if [[ \$&lt;span class="caps"&gt;KBPS&lt;/span&gt; -gt \$&lt;span class="caps"&gt;THRESHOLD&lt;/span&gt; ]];&amp;nbsp;then&lt;/p&gt;
&lt;p&gt;duplicity incremental -vN &amp;#8212;ssh-askpass &amp;#8212;exclude /proc &amp;#8212;exclude /mnt
&amp;#8212;exclude /media &amp;#8212;exclude /tmp &amp;#8212;exclude /sys &amp;#8212;exclude \$&lt;span class="caps"&gt;HOME&lt;/span&gt;/.local
&amp;#8212;exclude \$&lt;span class="caps"&gt;HOME&lt;/span&gt;/.config exclude /var/log /&amp;nbsp;\$BACKUP_TO_OCATION_\$i&lt;/p&gt;
&lt;p&gt;fi&lt;/p&gt;
&lt;p&gt;break;;&lt;/p&gt;
&lt;p&gt;No)&lt;/p&gt;
&lt;p&gt;break;;&lt;/p&gt;
&lt;p&gt;esac&lt;/p&gt;
&lt;p&gt;done&lt;/p&gt;
&lt;p&gt;esac&lt;/p&gt;
&lt;p&gt;done&lt;/p&gt;
&lt;p&gt;done&lt;/p&gt;
&lt;p&gt;unset&amp;nbsp;&lt;span class="caps"&gt;PASSPHRASE&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;This can be added as a &lt;a href="http://unixgeeks.org/security/newbie/unix/cron-1.html"&gt;crontab&lt;/a&gt; (so that the script, in this crontab
example, will run automatically, once per hour at one minute after the
hour) by doing (but the script will still check the network connection
before sending anything&amp;nbsp;out).&lt;/p&gt;
&lt;p&gt;If you have any comments, suggestion, or feature requests, please [email
me][] and [my &lt;span class="caps"&gt;GPG&lt;/span&gt; public key is&amp;nbsp;here][].&lt;/p&gt;
&lt;p&gt;Features yet to be&amp;nbsp;added:&lt;/p&gt;
&lt;p&gt;Differentiation between Wifi, Ethernet, and 3G/4G&amp;nbsp;connections.&lt;/p&gt;
&lt;p&gt;Support for cleaning up old backups and how often to do&amp;nbsp;so.&lt;/p&gt;
&lt;p&gt;Configurable setting for what percentage of the available bandwidth
should be&amp;nbsp;utilised.&lt;/p&gt;
&lt;p&gt;~~Fix the bug in Duplicity that makes it default to &lt;span class="caps"&gt;SFTP&lt;/span&gt; when &lt;span class="caps"&gt;SCP&lt;/span&gt; is&amp;nbsp;called.~~&lt;/p&gt;
&lt;p&gt;[(or view it on github here)]: https://github.com/isis agora lovecruftlovecruft/duplikat
  [email me]: mailto:isis agora lovecruft@patternsinthevoid.net?Subject=Bash%20Backup%20Script
    &amp;#8220;email me&amp;#8221;
  [my &lt;span class="caps"&gt;GPG&lt;/span&gt; public key is here]: http://www.patternsinthevoid.net/isis agora lovecruft_pgp_public_key.html
    &amp;#8220;my &lt;span class="caps"&gt;GPG&lt;/span&gt; public key is&amp;nbsp;here&amp;#8221;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft</dc:creator><pubDate>Mon, 19 Dec 2011 19:29:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2011-12-19:automated-bandwidth-efficient-and-encrypted-backups.html</guid><category>backup</category><category>bash scripting</category><category>command line</category><category>cryptography</category><category>duplicity</category><category>linux</category></item><item><title>Depression Has Infinite Recursion</title><link>https://blog.patternsinthevoid.net/depression-has-infinite-recursion.html</link><description>&lt;p&gt;&lt;code&gt;#!/usr/bin/env/ python&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;def&amp;nbsp;do_nothing():&lt;/p&gt;
&lt;p&gt;while depressed is&amp;nbsp;True:&lt;/p&gt;
&lt;p&gt;do_nothing()&lt;/p&gt;
&lt;p&gt;print &amp;#8220;you are still&amp;nbsp;depressed&amp;#8221;&lt;/p&gt;
&lt;p&gt;if __name__ ==&amp;nbsp;&amp;#8220;__main__&amp;#8221;:&lt;/p&gt;
&lt;p&gt;depressed =&amp;nbsp;True&lt;/p&gt;
&lt;p&gt;do_nothing()&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis</dc:creator><pubDate>Mon, 19 Dec 2011 03:03:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2011-12-19:depression-has-infinite-recursion.html</guid><category>i thought robots weren't supposed to have emotions</category></item><item><title>Hivemind</title><link>https://blog.patternsinthevoid.net/hivemind.html</link><description>&lt;p&gt;So I hacked together this &lt;span class="caps"&gt;IRC&lt;/span&gt; bot to play oldschool text-based RPGs with
multiple people in an &lt;span class="caps"&gt;IRC&lt;/span&gt; channel. The &lt;a href="http://www.ifarchive.org/indexes/if-archiveXgamesXzcode.html"&gt;RPGs are pre-written&lt;/a&gt; and are
run by a Z-Machine interpreter called &lt;a href="http://frotz.sourceforge.net/"&gt;Frotz&lt;/a&gt;, which runs on a server
somewhere, and commands to Frotz are piped to stdin through a python
program called &lt;a href="http://www.noah.org/python/pexpect/"&gt;pexpect&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;m not going to say which channel this thing is is, because it&amp;#8217;s hella
insecure (Frotz uses multiple uses of strcpy(), wtf?!), but I will say
that while looking into pexpect I found some old 1990s botnet C&amp;amp;C
software when I totally wasn&amp;#8217;t expecting it. Check out this file,
&lt;a href="http://patternsinthevoid.net/hive.py.txt"&gt;hive.py&lt;/a&gt;, which comes with pexpect! So oldschool! (Don&amp;#8217;t worry, that
link goes to a .txt file, so nothing will run on this server nor on your
computer. It&amp;#8217;s safe, I&amp;nbsp;promise.)&lt;/p&gt;
&lt;p&gt;For some reason, this made me really happy.&amp;nbsp;\&amp;lt;(A)3&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">isis agora lovecruft agora lovecruft</dc:creator><pubDate>Wed, 14 Dec 2011 15:31:00 +0000</pubDate><guid>tag:https://blog.patternsinthevoid.net,2011-12-14:hivemind.html</guid><category>botnet</category><category>C</category><category>digital security</category><category>hacking</category><category>hivemind</category><category>IRC</category><category>python</category><category>text-based RPGs</category></item></channel></rss>